var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function l(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e,n){t.classList[n?"add":"remove"](e)}let d;function g(t){d=t}function p(t){(function(){if(!d)throw new Error("Function called outside component initialization");return d})().$$.on_destroy.push(t)}const m=[],$=[],w=[],b=[],y=Promise.resolve();let x=!1;function v(t){w.push(t)}let _=!1;const A=new Set;function R(){if(!_){_=!0;do{for(let t=0;t<m.length;t+=1){const e=m[t];g(e),j(e.$$)}for(g(null),m.length=0;$.length;)$.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];A.has(e)||(A.add(e),e())}w.length=0}while(m.length);for(;b.length;)b.pop()();x=!1,_=!1,A.clear()}}function j(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(v)}}const N=new Set;let O;function E(){O={r:0,c:[],p:O}}function S(){O.r||r(O.c),O=O.p}function k(t,e){t&&t.i&&(N.delete(t),t.i(e))}function I(t,e,n,r){if(t&&t.o){if(N.has(t))return;N.add(t),O.c.push((()=>{N.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function L(t){t&&t.c()}function M(t,n,s){const{fragment:i,on_mount:l,on_destroy:c,after_update:u}=t.$$;i&&i.m(n,s),v((()=>{const n=l.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(v)}function C(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(m.push(t),x||(x=!0,y.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(e,o,s,i,l,u,a=[-1]){const f=d;g(e);const h=o.props||{},p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let m=!1;if(p.ctx=s?s(e,h,((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&B(e,t)),n})):[],p.update(),m=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();o.intro&&k(e.$$.fragment),M(e,o.target,o.anchor),R()}g(f)}class V{$destroy(){C(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class q{calculateCellState(t,e){const n=this.toNumberOfLivingNeighbours(e);return t?this.staysAlive(n):this.resurrects(n)}staysAlive(t){return 3===t||2===t}resurrects(t){return 3===t}toNumberOfLivingNeighbours(t){return t.filter((t=>!!t)).length}}class z{constructor(t){this.cellStateCalculator=t}updateMatrix(t){return t.map(((t,e,n)=>{const r=this.toRows(n,e);return t.map(((t,e)=>{const n=Object.assign(Object.assign({},r),{cellIndex:e}),o=this.toNeighbours(n);return this.cellStateCalculator.calculateCellState(t,o)}))}))}toNeighbours(t){return[...[t.previousRow,t.nextRow].map((e=>this.toPreviousOrNextRowAdjacents(e,t.cellIndex))).flat(),...this.toAdjacents(t.currentRow,t.cellIndex)]}toRows(t,e){return{previousRow:t[e-1]||t[t.length-1],currentRow:t[e],nextRow:t[e+1]||t[0]}}toAdjacents(t,e){return[void 0===t[e-1]?t[t.length-1]:t[e-1],void 0===t[e+1]?t[0]:t[e+1]]}toPreviousOrNextRowAdjacents(t,e){return[...this.toAdjacents(t,e),t[e]]}}const F=[];const H=function(e,n=t){let r;const o=[];function i(t){if(s(e,t)&&(e=t,r)){const t=!F.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),F.push(n,e)}if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,l=t){const c=[s,l];return o.push(c),1===o.length&&(r=n(i)||t),s(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}([]);class W{constructor(){this.cellSideLength=10}initialise(t){const e=Math.floor(t.width/this.cellSideLength),n=Math.floor(t.height/this.cellSideLength);return this.generateEmptyArray(n).map((()=>this.generateRow(e)))}generateInitialValue(){return Math.random()>.5}generateRow(t){return this.generateEmptyArray(t).map((()=>this.generateInitialValue()))}generateEmptyArray(t){return new Array(t).fill(0)}}function D(e){let n;return{c(){n=a("div"),f(n,"class","cell svelte-14a3ns5"),f(n,"style",e[1]),h(n,"alive",e[0])},m(t,e){l(t,n,e)},p(t,[e]){1&e&&h(n,"alive",t[0])},i:t,o:t,d(t){t&&c(n)}}}function G(t,e,n){let{state:r}=e;return t.$$set=t=>{"state"in t&&n(0,r=t.state)},[r,"width: 10px; height: 10px"]}class J extends V{constructor(t){super(),P(this,t,G,D,s,{state:0})}}function K(t,e,n){const r=t.slice();return r[1]=e[n],r}function Q(t){let e,n;return e=new J({props:{state:t[1]}}),{c(){L(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.state=t[1]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function T(t){let e,n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=Q(K(t,r,e));const s=t=>I(o[t],1,1,(()=>{o[t]=null}));return{c(){e=a("div");for(let t=0;t<o.length;t+=1)o[t].c();f(e,"class","row svelte-18xoxmo")},m(t,r){l(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(1&n){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=K(t,r,i);o[i]?(o[i].p(s,n),k(o[i],1)):(o[i]=Q(s),o[i].c(),k(o[i],1),o[i].m(e,null))}for(E(),i=r.length;i<o.length;i+=1)s(i);S()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)k(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)I(o[t]);n=!1},d(t){t&&c(e),u(o,t)}}}function U(t,e,n){let{row:r}=e;return t.$$set=t=>{"row"in t&&n(0,r=t.row)},[r]}class X extends V{constructor(t){super(),P(this,t,U,T,s,{row:0})}}function Y(t,e,n){const r=t.slice();return r[6]=e[n],r}function Z(t){let e,n;return e=new X({props:{row:t[6]}}),{c(){L(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.row=t[6]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function tt(t){let e,n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=Z(Y(t,r,e));const s=t=>I(o[t],1,1,(()=>{o[t]=null}));return{c(){e=a("main");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){l(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(1&n){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=Y(t,r,i);o[i]?(o[i].p(s,n),k(o[i],1)):(o[i]=Z(s),o[i].c(),k(o[i],1),o[i].m(e,null))}for(E(),i=r.length;i<o.length;i+=1)s(i);S()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)k(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)I(o[t]);n=!1},d(t){t&&c(e),u(o,t)}}}function et(t,e,n){let r;i(t,H,(t=>n(0,r=t)));const o=new q,s=new z(o),l=(new W).initialise({width:window.innerWidth,height:window.innerHeight});H.update((()=>l));const c=setInterval((()=>{H.update((t=>s.updateMatrix(t)))}),100);return p((()=>clearInterval(c))),[r]}return new class extends V{constructor(t){super(),P(this,t,et,tt,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
